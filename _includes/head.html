<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  {% capture title_calc %}{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}{% if page.subtitle %}: {{ page.subtitle }}{% endif %}{% endcapture %}
  {% capture description_calc %}{{ page.excerpt | newline_to_br | strip_html }}{% endcapture %}
  
 <!-- Primary Meta Tags -->
 <!-- Test with https://metatags.io/-->
  
  <title>{{ title_calc }}</title>
  <meta name="title" content="{{ title_calc }}"</meta>
  <meta name="description" content="{{ description_calc }}">

  <link rel="stylesheet" href="{{ "/css/main.css" | prepend: site.baseurl }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">

  <link rel="authorization_endpoint" href="https://indieauth.com/auth">
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
  <link rel="micropub" href="https://jericson-micropub.herokuapp.com/micropub">

  <!-- Stolen from https://github.com/jekyll/jekyll-seo-tag -->
 

  <link rel="canonical" href="{{ site.url }}{{ page.url }}" />


  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}{% if page.subtitle %}: {{ page.subtitle }}{% endif %}" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:description" content="{{ description_calc }}" />

{% if page.date %}
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
  <meta name="publish_date" property="og:publish_date" content="{{ page.date | date_to_xmlschema }}" />
{% else %}
   <meta property="og:type" content="website" />
{% endif %}

<!-- Automated image gathering thanks to https://community.shopify.com/c/shopify-design/pull-an-image-from-a-page-using-liquid/m-p/231494/highlight/true#M63172 -->
   
{% if page.content contains "<img" %}
   {% assign images = page.content | split: 'img src="' %}
   {% assign image = images[1] | split:'"' | first %}
{% else %}
   {% assign image = "/images/don_quixote.jpg" %}                                   
{% endif %}
{% if image contains ":" %}

                           
   <meta property="og:image" content="{{ image }}">
<!-- Twitter -->
   <meta property="twitter:image" content="{{ image }}">
{% else %}                                                          
   <meta property="og:image" content="{{ site.url }}{{ image }}">
<!-- Twitter -->
   <meta property="twitter:image" content="{{ site.url }}{{ image }}">
 {% endif %}
   
   <meta property="twitter:card" content="summary_large_image">
   <meta property="twitter:url" content="{{ site.url }}{{ page.url }}">
   <meta property="twitter:title" content="{{ title_calc }}">
   <meta property="twitter:description" content="{{ description_calc }}">


   <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_vcwHjbShJA7rRwJaZ3xeOj39VLoygyHslsP2YIsPRUg',{api_host:'https://us.i.posthog.com', person_profiles: 'identified_only' // or 'always' to create profiles for anonymous users as well
        })
</script>
</head>


